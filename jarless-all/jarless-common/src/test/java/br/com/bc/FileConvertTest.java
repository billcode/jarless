package br.com.bc;

import static org.junit.Assert.assertEquals;

import org.junit.Test;

import br.com.bc.json.JsonConverter;
import br.com.bc.rest.ServiceEngine;

public class FileConvertTest {

	@Test public void geraArquivoJson() throws Exception {
		
		//dado um arquivo de servico
		String service_class_name = "ConsultarCep.java";
		String request = "";
		String response = "";
		
		//quando fazemos a conversao
		JsonConverter jsonConverter = new JsonConverter();
		jsonConverter.setBinFolder("src/test/resources/");
		jsonConverter.setBinExtension(".clazz");
		String result = jsonConverter.geraJson(service_class_name, request, response);
		
		//entao o resultado esperado eh
		assertEquals("{\"response\":\"\",\"main_class\":{\"source\":\"\",\"name\":\"ConsultarCep.java\",\"data\":[-54,-2,-70,-66,0,0,0,50,0,40,7,0,2,1,0,12,67,111,110,115,117,108,116,97,114,67,101,112,7,0,4,1,0,16,106,97,118,97,47,108,97,110,103,47,79,98,106,101,99,116,7,0,6,1,0,21,98,114,47,99,111,109,47,98,99,47,114,101,115,116,47,65,99,116,105,111,110,1,0,6,60,105,110,105,116,62,1,0,3,40,41,86,1,0,4,67,111,100,101,10,0,3,0,11,12,0,7,0,8,1,0,15,76,105,110,101,78,117,109,98,101,114,84,97,98,108,101,1,0,18,76,111,99,97,108,86,97,114,105,97,98,108,101,84,97,98,108,101,1,0,4,116,104,105,115,1,0,14,76,67,111,110,115,117,108,116,97,114,67,101,112,59,1,0,7,101,120,101,99,117,116,101,1,0,38,40,76,106,97,118,97,47,108,97,110,103,47,79,98,106,101,99,116,59,41,76,106,97,118,97,47,108,97,110,103,47,79,98,106,101,99,116,59,8,0,19,1,0,18,67,69,80,32,110,97,111,32,101,110,99,111,110,116,114,97,100,111,8,0,21,1,0,0,7,0,23,1,0,16,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,8,0,25,1,0,8,48,53,52,53,56,48,48,49,10,0,22,0,27,12,0,28,0,29,1,0,6,101,113,117,97,108,115,1,0,21,40,76,106,97,118,97,47,108,97,110,103,47,79,98,106,101,99,116,59,41,90,8,0,31,1,0,21,65,118,32,68,105,111,103,101,110,101,115,32,82,32,100,101,32,76,105,109,97,1,0,7,114,101,113,117,101,115,116,1,0,18,76,106,97,118,97,47,108,97,110,103,47,79,98,106,101,99,116,59,1,0,6,114,101,115,117,108,116,1,0,18,76,106,97,118,97,47,108,97,110,103,47,83,116,114,105,110,103,59,1,0,3,99,101,112,1,0,13,83,116,97,99,107,77,97,112,84,97,98,108,101,1,0,10,83,111,117,114,99,101,70,105,108,101,1,0,17,67,111,110,115,117,108,116,97,114,67,101,112,46,106,97,118,97,0,33,0,1,0,3,0,1,0,5,0,0,0,2,0,1,0,7,0,8,0,1,0,9,0,0,0,47,0,1,0,1,0,0,0,5,42,-73,0,10,-79,0,0,0,2,0,12,0,0,0,6,0,1,0,0,0,12,0,13,0,0,0,12,0,1,0,0,0,5,0,14,0,15,0,0,0,1,0,16,0,17,0,1,0,9,0,0,0,-110,0,2,0,4,0,0,0,32,18,18,77,18,20,78,43,-63,0,22,-103,0,8,43,-64,0,22,78,45,18,24,-74,0,26,-103,0,6,18,30,77,44,-80,0,0,0,3,0,12,0,0,0,30,0,7,0,0,0,17,0,3,0,19,0,6,0,20,0,13,0,21,0,18,0,24,0,27,0,25,0,30,0,28,0,13,0,0,0,42,0,4,0,0,0,32,0,14,0,15,0,0,0,0,0,32,0,32,0,33,0,1,0,3,0,29,0,34,0,35,0,2,0,6,0,26,0,36,0,35,0,3,0,37,0,0,0,12,0,2,-3,0,18,7,0,22,7,0,22,11,0,1,0,38,0,0,0,2,0,39]},\"request\":\"\",\"name\":\"ConsultarCep\"}", result);
		
		ServiceEngine.getInstance().deployServiceJson(result);
		
	}
	
	
}
